async function openProject(projectID) {

    await fetch(`https://ai-meneger-edward0076.amvera.io/projects/${projectID}`)
        .then(projectData => projectData.json())
        .then(async (projectData) => {
            console.log(projectData);

            document.querySelector(".window__folder_observe").innerHTML =
                `
            <div class="folder_observe__folder_name">
                <svg width="27" height="25" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M4.24219 0C5.00989 -1.30247e-06 5.61349 -0.0140535 6.15137 0.236328C6.74108 0.510335 7.12845 0.9684 7.40723 1.43848C7.67815 1.8954 7.88081 2.42407 8.05957 2.86816L8.33691 3.55566H12.1104C12.8465 3.55566 13.464 3.55421 13.9629 3.61719C14.483 3.68287 14.9522 3.82617 15.3623 4.16602L15.4756 4.26465C15.7351 4.50317 15.9538 4.79115 16.125 5.10938L16.2373 5.34375C16.4303 5.80223 16.5042 6.32278 16.5381 6.92969C17.009 7.05466 17.4291 7.27607 17.7461 7.68457H17.7471C18.4045 8.533 18.2892 9.57659 18.0703 10.3809C17.8564 11.1665 17.4375 12.0486 17.2637 12.5117C16.8878 13.5128 16.5891 14.3098 16.2861 14.9307C15.9776 15.5629 15.6378 16.0692 15.1504 16.4668L15.1514 16.4678C14.4235 17.0617 13.5577 17.2763 12.752 17.3555C11.9686 17.4323 11.1197 17.3867 10.4805 17.3867H8.89941C8.85399 17.396 8.80694 17.4004 8.75879 17.4004H7.86426C6.95932 17.4004 6.15154 17.3997 5.43457 17.3721C4.82803 17.3573 4.29544 17.3277 3.83496 17.2646C3.01687 17.1526 2.31393 16.9234 1.78027 16.4082C1.57397 16.2464 1.38159 16.0581 1.2041 15.8379C0.556636 15.0344 0.272756 14.0276 0.135742 12.7637C-0.000423451 11.5068 0 9.88948 0 7.81055V5.0957C-1.40513e-07 4.29896 -0.000141895 3.66416 0.0361328 3.1543C0.0724966 2.64349 0.148994 2.19935 0.331055 1.79102C0.559109 1.26282 0.926315 0.806415 1.39355 0.470703L1.40332 0.462891V0.463867C1.77905 0.203516 2.19149 0.0960893 2.64062 0.046875C3.07392 -0.000570515 3.60716 -2.1579e-10 4.24219 0ZM5.88477 8.14258C5.48052 8.14257 5.1759 8.12413 4.8623 8.15918C4.57245 8.19168 4.3789 8.26276 4.24023 8.38086L4.24121 8.38184C4.16514 8.4473 4.08146 8.55078 3.96875 8.78418C3.85086 9.02836 3.72709 9.35653 3.54199 9.85156C3.54068 9.85482 3.5374 9.85809 3.53613 9.86133C3.17759 10.8141 2.68315 11.7979 2.4082 12.8633C2.1386 13.9083 2.17598 14.7265 2.66699 15.3125C2.67479 15.3218 2.68425 15.3298 2.69238 15.3389C3.02522 15.5852 3.44913 15.7466 4.04883 15.8467C4.45813 15.915 4.92757 15.9516 5.47754 15.9727C6.01968 15.9853 6.64846 15.9863 7.38379 15.9863H10.4805C11.2343 15.9863 11.9222 16.0309 12.6152 15.9629C13.2863 15.897 13.839 15.7308 14.2656 15.3828L14.3652 15.2959C14.5939 15.0818 14.7986 14.7861 15.0273 14.3174C15.2944 13.77 15.5679 13.0458 15.9531 12.0195C16.2037 11.3519 16.5229 10.7329 16.7188 10.0137C16.9095 9.31304 16.8747 8.84637 16.6396 8.54297C16.5413 8.41618 16.3656 8.29254 15.8564 8.21973C15.3311 8.14464 14.6084 8.14258 13.5439 8.14258H5.88477ZM4.24219 1.40039C3.5762 1.40039 3.1325 1.4013 2.79297 1.43848C2.47286 1.47357 2.31539 1.53442 2.20312 1.61133C1.94503 1.79856 1.74267 2.0529 1.61621 2.3457L1.61133 2.35645C1.52381 2.55074 1.46418 2.81054 1.43262 3.25391C1.40072 3.70249 1.40039 4.27891 1.40039 5.0957V7.81055C1.40039 9.21927 1.40173 10.3682 1.43945 11.3223C1.72226 10.5683 2.0427 9.86044 2.23047 9.36035C2.407 8.88824 2.55588 8.49092 2.70801 8.17578C2.86541 7.84983 3.05081 7.5588 3.32812 7.32031L3.3291 7.31934C3.76262 6.94829 4.26771 6.81676 4.70703 6.76758C5.12391 6.72098 5.58434 6.74217 5.88477 6.74219H13.5439C14.1306 6.74219 14.6584 6.7434 15.124 6.76074C15.0822 6.27375 15.0086 5.98872 14.8926 5.77344L14.8916 5.77246C14.774 5.55388 14.628 5.37508 14.4697 5.24414H14.4688C14.3367 5.13478 14.1574 5.05254 13.7881 5.00586C13.3971 4.95648 12.8826 4.95508 12.1104 4.95508H4.91406C4.52757 4.95506 4.21403 4.64231 4.21387 4.25586C4.21406 3.86943 4.5276 3.55568 4.91406 3.55566H6.82715L6.76074 3.3916V3.39062C6.56408 2.90205 6.40613 2.49472 6.20312 2.15234C6.00791 1.82322 5.80621 1.61815 5.5625 1.50488H5.56152C5.37057 1.41584 5.1408 1.40039 4.24219 1.40039Z"
                        fill="black" />
                </svg>
                <h1>${projectData.title}</h1>
            </div>

            <div class="chat-search__input">
                <label>
                    <input type="file" id="observe_input" />
                    <div class="search__input-plus">
                        <svg width="13" height="14" viewBox="0 0 13 14" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M-0.0078125 7.35938C-0.0078125 6.97656 0.3125 6.65625 0.6875 6.65625H5.74219V1.60938C5.74219 1.23438 6.05469 0.914062 6.4375 0.914062C6.82031 0.914062 7.14062 1.23438 7.14062 1.60938V6.65625H12.1875C12.5625 6.65625 12.8828 6.97656 12.8828 7.35938C12.8828 7.74219 12.5625 8.05469 12.1875 8.05469H7.14062V13.1094C7.14062 13.4844 6.82031 13.8047 6.4375 13.8047C6.05469 13.8047 5.74219 13.4844 5.74219 13.1094V8.05469H0.6875C0.3125 8.05469 -0.0078125 7.74219 -0.0078125 7.35938Z"
                                fill="black" />
                        </svg>
                    </div>
                </label>

                <input class="search__input-field" type="text" id="project_message_input" placeholder="Новый чат в ${projectData.title}">

                <div class="search__input-voice">
                    <svg width="12" height="18" viewBox="0 0 12 18" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M3.125 8.42188V3.50781C3.125 1.70312 4.28125 0.445312 5.96875 0.445312C7.64844 0.445312 8.80469 1.70312 8.80469 3.50781V8.42188C8.80469 10.2188 7.64844 11.4844 5.96875 11.4844C4.28125 11.4844 3.125 10.2188 3.125 8.42188ZM4.30469 8.42188C4.30469 9.57812 4.96875 10.3203 5.96875 10.3203C6.96875 10.3203 7.625 9.57812 7.625 8.42188V3.50781C7.625 2.35156 6.96875 1.60938 5.96875 1.60938C4.96875 1.60938 4.30469 2.35156 4.30469 3.50781V8.42188ZM0.375 8.70312V7.11719C0.375 6.78906 0.632812 6.53125 0.960938 6.53125C1.29688 6.53125 1.55469 6.78906 1.55469 7.11719V8.65625C1.55469 11.3203 3.28906 13.0859 5.96875 13.0859C8.64062 13.0859 10.375 11.3203 10.375 8.65625V7.11719C10.375 6.78906 10.6406 6.53125 10.9688 6.53125C11.2969 6.53125 11.5547 6.78906 11.5547 7.11719V8.70312C11.5547 11.7656 9.53906 13.9141 6.55469 14.1641V15.9844H9.45312C9.78125 15.9844 10.0469 16.25 10.0469 16.5781C10.0469 16.9062 9.78125 17.1641 9.45312 17.1641H2.47656C2.14844 17.1641 1.88281 16.9062 1.88281 16.5781C1.88281 16.25 2.14844 15.9844 2.47656 15.9844H5.375V14.1641C2.39844 13.9141 0.375 11.7656 0.375 8.70312Z"
                            fill="black" />
                    </svg>
                </div>
                <div class="search__input-send_button" id="observe_send_message">
                    <svg width="30" height="30" viewBox="0 0 30 30" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <circle cx="15" cy="15" r="15" fill="black" />
                        <path d="M15 20.8333V9.16666" stroke="white" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M10.0001 13.9997L15 9.16666L20.0001 13.9997" stroke="white" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
            </div>

            <div class="folder_observe__hints_block">
                <div class="folder_observe__hints_block-card">
                    <h2>Добавить файлы</h2>
                    <p>Чаты в этом проекте имеют доступ к содержимому файла</p>
                </div>
                <div class="folder_observe__hints_block-card">
                    <h2>Добавить инструкции</h2>
                    <p>Настроить способ реагирования ChatGPT в этом проекте</p>
                </div>
            </div>

            <div class="folder_observe__folders_list">
                
            </div>
            `;

            // document.querySelector(".folder_observe__folders_list")

            await fetch(`https://ai-meneger-edward0076.amvera.io/projects/${projectData.id}/chats`)
                .then(chatsData => {
                    return chatsData.json()
                })
                .then(chatsData => {

                    chatsData.forEach(chat => {
                        console.log(chat.created_at.slice(0, 10), chat.title);

                        let chatData = chat.created_at.slice(0, 10);
                        let chatTitle = chat.title;
                        let chatId = chat.id;
                        let chatLastMessage;

                        fetch(`https://ai-meneger-edward0076.amvera.io/chat_gpt/messages/${chat.id}`)
                            .then(res => res.json())
                            .then(chatObject => {

                                chatLastMessage = chatObject[0].content;

                            });

                        document.querySelector(".folder_observe__folders_list").innerHTML +=
                            `
                        <div class="folder_observe__folders_list-card" data-chat-id="${chatId}">
                            <div class="folders_list-card__content">
                                <h2>${chatTitle}</h2>
                                <p>${chatLastMessage}</p>
                            </div>
                            <div class="folders_list-card__date">${chatData}</div>
                        </div>
                        `;

                    });
                });

            document.querySelectorAll(".folder_observe__folders_list-card").forEach(card => {
                card.onclick = () => {
                    let cardChatID = card.dataset.chatId;

                    openChat(cardChatID);
                };
            });

            

        });
}

// function newChatInProject(projectId, formData) {

//     let messageText = document.querySelector("#project_message_input").value;
//     document.querySelector("#project_message_input").value = '';



// }